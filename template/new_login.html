<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Login Ophira System</title>
    <link rel="stylesheet" type="text/css" href="/static/css/iview.css">
    <link rel="stylesheet" type="text/css" href="/static/css/style.css">
    <script type="text/javascript" src="/static/js/vue.js"></script>
    <script type="text/javascript" src="/static/js/iview.js"></script>
    <script type="text/javascript" src="/static/js/jquery-3.3.1.js"></script>




</head>
<body style="background: black">
<p id="indexWelcome"> Welcome to login ophira system </p>
 <a href="https://github.com/AlvinWanCN" target="_blank"><img src="/static/img/etlucency.png " id="indeximage"></a>
 <a href="https://github.com/AlvinWanCN" target="_blank"><img src="/static/img/blue_tie.ico " class="indexalien" id="indextitleimg"></a>

<div id="app">
    <div id="login">
        <i-form ref="formInline" :model="formInline" :rules="ruleInline" inline>
            <p style="color: red;" id="warning"></p>
            <form-item prop="user">
                <i-input type="text" v-model="formInline.username" placeholder="Username">
                    <icon type="ios-person-outline" slot="prepend"></icon>
                </i-input>
            </form-item></br>
            <form-item prop="password" >
                <i-input type="password" v-model="formInline.password" placeholder="Password">
                    <icon type="ios-locked-outline" slot="prepend"></icon>
                </i-input>
            </form-item></br></br>
            <form-item  >
                <i-button type="primary" @click="handleSubmit(formInline)" class="indexbutton">Login</i-button>
            </form-item></br>
             <form-item>
                 <i-button type="primary" @click="registerSubmit" class="indexbutton">Register</i-button>
            </form-item>
        </i-form>
    </div>
</div>
</body>
<script type="text/javascript">
    var exampleData={
        message:'vue massage',
        value:'',
        formInline: {
            username: '',
            password: ''
        },
        ruleInline: {
            username: [
                { required: true, message: 'Please fill in the user name', trigger: 'blur' },
            ],
            password: [
                { required: true, message: 'Please fill in the password.', trigger: 'blur' },
                { type: 'string', min: 6, message: 'The password length cannot be less than 6 bits', trigger: 'blur' }
            ]
        }
    }
    new Vue({
        el:'#app',
        data:exampleData,
        delimiters:['${', '}'],
        methods:{
            handleSubmit:function (name) {
                $.ajax(
                    {
                        type: "POST",
                        dataType: "json",
                        url:"/auth_pass",
                        data:name,
                        success: function (result) {
                            console.log(result.code );//打印服务端返回的数据(调试用)
                            if (result.code == 0) {
                                sessionStorage.setItem('nickname',result.nickname);
                                window.location.href="/";
                            }else {
{#                                alert("用户名或密码错误")#}
                                $('#warning').html('Username or Password error,please try again.')
                            }
                            ;
                        },
                        error : function(e) {
{#                            alert("请输入用户名或密码！");#}
                            console.log(e)
                            $('#warning').html('Username or Password error,please try again.')
                        }
                    })
            },
            registerSubmit:function () {
                window.location.href="/register";
            }


        }


    })

</script>
</html>